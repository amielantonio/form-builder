<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" integrity="sha384-gfdkjb5BdAXd+lj+gudLWI+BXq4IuLW5IT+brZEZsLFm++aCMlF1V92rMkPaX4PP" crossorigin="anonymous">
    <link rel="stylesheet" href="release/css/app.css">


    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
</head>
<body>

<div class="" style="padding: 30px;">

    <div id="form-builder"></div>

    <div class="ui-widget">
        <label for="tags">Tags: </label>
        <input id="tags">
    </div>

</div>

<footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <script src="release/js/app.js"></script>
</footer>

<script>
  ( function($){

    $( function(){
      $( '#form-builder' ).formBuilder();

      var autocompleteList=[];
      var masterList=[];
      var bldg_address = "";
      var ps_no="";

      $.getJSON( 'results.json', function( data ){
        $.each( data, function( key, val){
          $.each( val, function( newKey, newVal){
            if( newKey == "Name"){
              ps_no = newVal;
            }
            if( newKey == "BillingAddress" ) {
              if( !newVal == ""){
                bldg_address = newVal.street + ", " + newVal.city + ", " + newVal.stateCode + ", " + newVal.postalCode;
              }
            }


          });
          masterList[ps_no] = bldg_address;
          autocompleteList.push(ps_no);
        })
      });

      console.log( autocompleteList );

      $( "#tags" ).autocomplete({
        source: autocompleteList,
        select: function( event, ui ){
          var token = ui.item.value;

          if( token in masterList){
            console.log( masterList[token] );
          }
        },
        _resizeMenu: function() {
          this.menu.element.outerWidth( 200 );
        }
      })

    });
  })(jQuery);
</script>

</body>
</html>
